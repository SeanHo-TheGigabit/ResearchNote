# Chrome DevTools ç«ç„°å›¾æ·±åº¦æŒ‡å—

## ç›®å½•
1. [ç«ç„°å›¾åŸºç¡€](#ç«ç„°å›¾åŸºç¡€)
2. [Chrome DevTools Performance é¢æ¿è¯¦è§£](#chrome-devtools-performance-é¢æ¿è¯¦è§£)
3. [å¦‚ä½•è¯»æ‡‚ç«ç„°å›¾](#å¦‚ä½•è¯»æ‡‚ç«ç„°å›¾)
4. [å®é™…ä¼˜åŒ–æ¡ˆä¾‹](#å®é™…ä¼˜åŒ–æ¡ˆä¾‹)
5. [2024å¹´æ–°åŠŸèƒ½](#2024å¹´æ–°åŠŸèƒ½)
6. [å¸¸è§æ€§èƒ½æ¨¡å¼è¯†åˆ«](#å¸¸è§æ€§èƒ½æ¨¡å¼è¯†åˆ«)
7. [é«˜çº§è°ƒè¯•æŠ€å·§](#é«˜çº§è°ƒè¯•æŠ€å·§)

---

## ç«ç„°å›¾åŸºç¡€

### ä»€ä¹ˆæ˜¯ç«ç„°å›¾ï¼Ÿ

ç«ç„°å›¾ï¼ˆFlame Chart/Flame Graphï¼‰æ˜¯ä¸€ç§å¯è§†åŒ–CPUæ—¶é—´æ¶ˆè€—çš„å·¥å…·ï¼Œé€šè¿‡é¢œè‰²å’Œå®½åº¦æ¥è¡¨ç¤ºå‡½æ•°æ‰§è¡Œæ—¶é—´å’Œè°ƒç”¨å…³ç³»ã€‚

**å…³é”®ç‰¹ç‚¹**:
- **æ¨ªè½´ï¼ˆå®½åº¦ï¼‰**: è¡¨ç¤ºå‡½æ•°æ‰§è¡Œæ—¶é—´ï¼Œè¶Šå®½è¡¨ç¤ºæ‰§è¡Œæ—¶é—´è¶Šé•¿
- **çºµè½´ï¼ˆé«˜åº¦ï¼‰**: è¡¨ç¤ºè°ƒç”¨æ ˆæ·±åº¦ï¼Œä»ä¸‹åˆ°ä¸Šæ˜¯è°ƒç”¨å…³ç³»
- **é¢œè‰²**:
  - é»„è‰²/æ©™è‰²ï¼šJavaScriptæ‰§è¡Œ
  - ç´«è‰²ï¼šæ¸²æŸ“/Layout
  - ç»¿è‰²ï¼šç»˜åˆ¶/Paint
  - è“è‰²ï¼šè¾ƒå¿«çš„å‡½æ•°
  - çº¢è‰²/æ·±é»„è‰²ï¼šæ€§èƒ½ç“¶é¢ˆ

### ç«ç„°å›¾ vs ç«ç„°å›¾è¡¨

```
ç«ç„°å›¾ï¼ˆFlame Graphï¼‰
- é€šå¸¸ç”¨äºåç«¯/Node.jsæ€§èƒ½åˆ†æ
- Yè½´è¡¨ç¤ºè°ƒç”¨æ ˆæ·±åº¦
- æŒ‰å­—æ¯é¡ºåºæ’åˆ—ï¼Œæ–¹ä¾¿åˆå¹¶ç›¸åŒè°ƒç”¨

ç«ç„°å›¾è¡¨ï¼ˆFlame Chartï¼‰
- Chrome DevTools ä½¿ç”¨çš„ç±»å‹
- Xè½´è¡¨ç¤ºæ—¶é—´è½´
- æ˜¾ç¤ºå®é™…æ‰§è¡Œé¡ºåº
- æ›´é€‚åˆå‰ç«¯æ€§èƒ½åˆ†æ
```

### ä¸ºä»€ä¹ˆç«ç„°å›¾æœ‰ç”¨ï¼Ÿ

1. **å¿«é€Ÿå®šä½ç“¶é¢ˆ**: ä¸€çœ¼çœ‹å‡ºå“ªä¸ªå‡½æ•°å ç”¨æœ€å¤šCPUæ—¶é—´
2. **ç†è§£è°ƒç”¨å…³ç³»**: æ¸…æ™°çœ‹åˆ°å‡½æ•°è°ƒç”¨é“¾
3. **å‘ç°æ„å¤–è°ƒç”¨**: æ‰¾å‡ºä¸åº”è¯¥è¢«è°ƒç”¨çš„å‡½æ•°
4. **éªŒè¯ä¼˜åŒ–æ•ˆæœ**: å¯¹æ¯”ä¼˜åŒ–å‰åçš„ç«ç„°å›¾

---

## Chrome DevTools Performance é¢æ¿è¯¦è§£

### æ‰“å¼€Performanceé¢æ¿

```bash
# æ–¹æ³•1: å¿«æ·é”®
Windows/Linux: Ctrl + Shift + E
Mac: Cmd + Option + E

# æ–¹æ³•2: èœå•
DevTools -> æ›´å¤šå·¥å…· -> Performance
```

### é¢æ¿å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â—å½•åˆ¶] [âŸ³é‡æ–°åŠ è½½] [ğŸ—‘æ¸…é™¤] [â¬†ä¸Šä¼ ] [â¬‡ä¸‹è½½]       â”‚  å·¥å…·æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–   â”‚  Overview
â”‚  FPS â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ             â”‚  (æ¦‚è§ˆ)
â”‚  CPU â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ              â”‚
â”‚  NET â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”¥ Frames    |  60 fps  |  16.7 ms               â”‚  å¸§ä¿¡æ¯
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ Network   â”â”â”â–“â–“â–“â”â”â”â”â”â”â–“â–“â–“â–“â”â”â”â”â”              â”‚  ç½‘ç»œè¯·æ±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš™ï¸  Main      â–ˆâ–ˆâ–“â–“â–“â–ˆâ–ˆâ–“â–“â–ˆâ–ˆâ–“â–“â–“â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ             â”‚  ä¸»çº¿ç¨‹
â”‚     â””â”€ Task   â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“             â”‚  (ç«ç„°å›¾)
â”‚        â””â”€ Function Call                            â”‚
â”‚           â””â”€ Sub Function                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¨ Raster    â–“â–“â–“â–“â”â”â”â”â”â”â–“â–“â”â”â”â”â”â”â”â”â”              â”‚  å…‰æ …åŒ–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§µ Worker    â”â”â–“â–“â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”              â”‚  Web Worker
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¾ GPU       â”â–“â”â”â”â”â–“â”â”â”â”â”â”â”â”â”â”â”â”â”â”              â”‚  GPUè¿›ç¨‹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  ğŸ“Š Summary   |  Details  |  Bottom-Up  | Call Treeâ”‚  è¯¦ç»†ä¿¡æ¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å½•åˆ¶æ€§èƒ½åˆ†æ

#### æ–¹æ³•1: å½•åˆ¶ç”¨æˆ·äº¤äº’
```javascript
1. ç‚¹å‡» "Record" æŒ‰é’® (â—)
2. æ‰§è¡Œéœ€è¦åˆ†æçš„æ“ä½œï¼ˆæ»šåŠ¨ã€ç‚¹å‡»ç­‰ï¼‰
3. ç‚¹å‡» "Stop" åœæ­¢å½•åˆ¶
4. åˆ†æå½•åˆ¶ç»“æœ
```

#### æ–¹æ³•2: é‡æ–°åŠ è½½å¹¶å½•åˆ¶
```javascript
1. ç‚¹å‡» "Start profiling and reload page" (âŸ³)
2. é¡µé¢ä¼šé‡æ–°åŠ è½½å¹¶è‡ªåŠ¨å½•åˆ¶
3. å½•åˆ¶å®Œæˆåè‡ªåŠ¨åœæ­¢
4. é€‚åˆåˆ†æé¡µé¢åŠ è½½æ€§èƒ½
```

### æ–°åŠŸèƒ½: CPU èŠ‚æµ (2024)

#### CPU èŠ‚æµæ ¡å‡†ï¼ˆChrome 134+ï¼‰
```javascript
// Chrome 134 å¼•å…¥äº† CPU èŠ‚æµæ ¡å‡†åŠŸèƒ½
// è‡ªåŠ¨ä¸ºä½ çš„æœºå™¨ç”Ÿæˆæœ€ä½³çš„èŠ‚æµé…ç½®

æ­¥éª¤:
1. Performance é¢æ¿ -> ç‚¹å‡»è®¾ç½®å›¾æ ‡ âš™ï¸
2. CPU -> é€‰æ‹© "Calibrate..."
3. ç­‰å¾…åŸºå‡†æµ‹è¯•å®Œæˆï¼ˆçº¦10-20ç§’ï¼‰
4. DevTools ä¼šç”Ÿæˆä¸¤ä¸ªé¢„è®¾:
   - "Low-tier mobile" (ä½ç«¯ç§»åŠ¨è®¾å¤‡)
   - "Mid-tier mobile" (ä¸­ç«¯ç§»åŠ¨è®¾å¤‡)
```

**å¯ç”¨çš„CPUèŠ‚æµé€‰é¡¹**:
- No throttling (æ— èŠ‚æµ)
- 4x slowdown
- 6x slowdown
- **20x slowdown** (Chrome 126æ–°å¢ï¼Œç”¨äºæ¨¡æ‹Ÿæä½ç«¯è®¾å¤‡)
- Custom (è‡ªå®šä¹‰)

#### ä½¿ç”¨åœºæ™¯
```javascript
// å¼€å‘ç¯å¢ƒé€šå¸¸æ€§èƒ½å¾ˆå¥½ï¼Œéœ€è¦èŠ‚æµæ¥æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è®¾å¤‡

// åœºæ™¯1: æµ‹è¯•ä½ç«¯ç§»åŠ¨è®¾å¤‡
// ä½¿ç”¨ 6x slowdown æˆ–æ ¡å‡†çš„ "Low-tier mobile"

// åœºæ™¯2: æŸ¥çœ‹æ›´å¤šæ€§èƒ½ç»†èŠ‚
// CPUèŠ‚æµä¼šæ”¾å¤§æ€§èƒ½é—®é¢˜ï¼Œè®©é‡‡æ ·profileræ•è·æ›´å¤šæ•°æ®

// åœºæ™¯3: éªŒè¯æ€§èƒ½ä¼˜åŒ–
// ä½¿ç”¨ç›¸åŒçš„èŠ‚æµé…ç½®å¯¹æ¯”ä¼˜åŒ–å‰å
```

### é¢æ¿åŒºåŸŸè¯¦è§£

#### 1. Overview åŒºåŸŸ

**FPS å›¾è¡¨**ï¼ˆç»¿è‰²æŸ±çŠ¶å›¾ï¼‰
```javascript
ç»¿è‰²: 60 FPSï¼Œæµç•…
é»„è‰²: 30-60 FPSï¼Œæœ‰äº›å¡é¡¿
çº¢è‰²: < 30 FPSï¼Œæ˜æ˜¾å¡é¡¿

// çº¢è‰²è¡¨ç¤ºé•¿ä»»åŠ¡ï¼ˆ> 50msï¼‰
// çº¢è‰²åŒºåŸŸé€šå¸¸æ˜¯æ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡
```

**CPU å›¾è¡¨**ï¼ˆå½©è‰²é¢ç§¯å›¾ï¼‰
```javascript
é»„è‰²: JavaScriptæ‰§è¡Œ
ç´«è‰²: æ¸²æŸ“å’Œå¸ƒå±€
ç»¿è‰²: ç»˜åˆ¶
ç°è‰²: å…¶ä»–ï¼ˆé—²ç½®ã€ç³»ç»Ÿç­‰ï¼‰

// å¦‚æœæŸç§é¢œè‰²å æ¯”è¿‡é«˜ï¼Œè¯´æ˜è¯¥ç±»å‹ä»»åŠ¡æ˜¯ç“¶é¢ˆ
```

**NET å›¾è¡¨**ï¼ˆç½‘ç»œè¯·æ±‚ï¼‰
```javascript
æ¯æ¡çº¿ä»£è¡¨ä¸€ä¸ªç½‘ç»œè¯·æ±‚
æ·±è‰²çº¿: é«˜ä¼˜å…ˆçº§èµ„æº
æµ…è‰²çº¿: ä½ä¼˜å…ˆçº§èµ„æº
```

#### 2. Main Threadï¼ˆä¸»çº¿ç¨‹ç«ç„°å›¾ï¼‰

è¿™æ˜¯æœ€é‡è¦çš„åŒºåŸŸï¼Œæ˜¾ç¤ºä¸»çº¿ç¨‹ä¸Šçš„æ‰€æœ‰æ´»åŠ¨ã€‚

**é¢œè‰²ç¼–ç **:
```javascript
// JavaScriptæ‰§è¡Œ
é»„è‰²: è„šæœ¬æ‰§è¡Œ
æ©™è‰²: ç¼–è¯‘/è§£æ

// æ¸²æŸ“
ç´«è‰²: Rendering (Style, Layout)
ç´«çº¢è‰²: Recalculate Style
æ·±ç´«è‰²: Layout (Reflow)

// ç»˜åˆ¶
ç»¿è‰²: Painting
æ·±ç»¿è‰²: Composite Layers

// å…¶ä»–
ç°è‰²: ç³»ç»Ÿ/é—²ç½®
ç™½è‰²: ç©ºé—²æ—¶é—´
çº¢è‰²è¾¹æ¡†: é•¿ä»»åŠ¡è­¦å‘Š (>50ms)
```

#### 3. Summary æ ‡ç­¾

```javascript
// æ˜¾ç¤ºé€‰ä¸­æ—¶é—´æ®µçš„ç»Ÿè®¡ä¿¡æ¯

Loading:    åŠ è½½ç›¸å…³ï¼ˆè§£æHTMLã€è§£ææ ·å¼è¡¨ï¼‰
Scripting:  JavaScriptæ‰§è¡Œæ—¶é—´
Rendering:  æ¸²æŸ“è®¡ç®—æ—¶é—´ï¼ˆæ ·å¼è®¡ç®—ã€å¸ƒå±€ï¼‰
Painting:   ç»˜åˆ¶æ—¶é—´
System:     ç³»ç»Ÿå¼€é”€
Idle:       é—²ç½®æ—¶é—´

æ€»æ—¶é—´ = Loading + Scripting + Rendering + Painting + System + Idle
```

#### 4. Bottom-Up æ ‡ç­¾

```javascript
// æŒ‰å‡½æ•°æ‰§è¡Œæ€»æ—¶é—´æ’åºï¼ˆåŒ…æ‹¬å­å‡½æ•°ï¼‰
// æœ€è€—æ—¶çš„å‡½æ•°åœ¨æœ€ä¸Šé¢

Self Time:  å‡½æ•°è‡ªèº«æ‰§è¡Œæ—¶é—´
Total Time: å‡½æ•°æ€»æ—¶é—´ï¼ˆåŒ…æ‹¬è°ƒç”¨çš„å­å‡½æ•°ï¼‰

// ä½¿ç”¨åœºæ™¯ï¼šå¿«é€Ÿæ‰¾åˆ°æœ€è€—æ—¶çš„å‡½æ•°
```

#### 5. Call Tree æ ‡ç­¾

```javascript
// æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ‘
// æŒ‰è°ƒç”¨å…³ç³»ç»„ç»‡

// ä½¿ç”¨åœºæ™¯ï¼šç†è§£å‡½æ•°è°ƒç”¨é“¾å’Œä¸Šä¸‹æ–‡
```

#### 6. Event Log æ ‡ç­¾

```javascript
// æŒ‰æ—¶é—´é¡ºåºåˆ—å‡ºæ‰€æœ‰äº‹ä»¶
// å¯ä»¥çœ‹åˆ°äº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯å’Œæ—¶é—´æˆ³

// ä½¿ç”¨åœºæ™¯ï¼šè°ƒè¯•äº‹ä»¶è§¦å‘é¡ºåºé—®é¢˜
```

---

## å¦‚ä½•è¯»æ‡‚ç«ç„°å›¾

### åŸºæœ¬é˜…è¯»è§„åˆ™

#### è§„åˆ™1: å®½åº¦ = æ—¶é—´
```javascript
// å‡½æ•°å—è¶Šå®½ï¼Œæ‰§è¡Œæ—¶é—´è¶Šé•¿

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† functionA() æ‰§è¡Œäº†å¾ˆé•¿æ—¶é—´
â”‚     functionA()         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”  â† functionB() æ‰§è¡Œæ—¶é—´å¾ˆçŸ­
â”‚ B â”‚
â””â”€â”€â”€â”˜
```

#### è§„åˆ™2: é«˜åº¦ = è°ƒç”¨æ·±åº¦
```javascript
// ä»ä¸‹å¾€ä¸Šçœ‹ï¼Œä¸‹é¢çš„å‡½æ•°è°ƒç”¨ä¸Šé¢çš„å‡½æ•°

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               Level 3: æœ€æ·±çš„å‡½æ•°
â”‚  funcC  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  funcB  â”‚               Level 2: è¢«funcAè°ƒç”¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚     funcA      â”‚        Level 1: æœ€å…ˆè¢«è°ƒç”¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è°ƒç”¨é¡ºåº: funcA -> funcB -> funcC
```

#### è§„åˆ™3: é¢œè‰² = æ´»åŠ¨ç±»å‹
```javascript
ğŸŸ¨ é»„è‰²: JavaScriptæ‰§è¡Œ
  - å‡½æ•°è°ƒç”¨
  - äº‹ä»¶å¤„ç†
  - å®šæ—¶å™¨

ğŸŸª ç´«è‰²: æ¸²æŸ“æ´»åŠ¨
  - Recalculate Style (é‡æ–°è®¡ç®—æ ·å¼)
  - Layout (å¸ƒå±€è®¡ç®—)
  - Update Layer Tree

ğŸŸ© ç»¿è‰²: ç»˜åˆ¶æ´»åŠ¨
  - Paint (ç»˜åˆ¶)
  - Rasterize (å…‰æ …åŒ–)
  - Composite Layers (åˆæˆå±‚)

â¬œ ç°è‰²: å…¶ä»–
  - ç³»ç»Ÿæ—¶é—´
  - é—²ç½®æ—¶é—´
```

### è¯†åˆ«æ€§èƒ½é—®é¢˜çš„è§†è§‰æ¨¡å¼

#### æ¨¡å¼1: é•¿ä»»åŠ¡ï¼ˆLong Tasksï¼‰
```javascript
// ç‰¹å¾: çº¢è‰²è¾¹æ¡†çš„å®½å—

âŒ é—®é¢˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  Task (78ms)                 â”‚  çº¢è‰²è¾¹æ¡†è¡¨ç¤º > 50ms
â”‚  â””â”€ heavyFunction (75ms)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸»çº¿ç¨‹è¢«é˜»å¡ 75msï¼Œç”¨æˆ·è¾“å…¥æ— å“åº”

âœ… ä¼˜åŒ–å
â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”
â”‚Task â”‚  â”‚Task â”‚  â”‚Task â”‚  â”‚Task â”‚  æ¯ä¸ª < 50ms
â”‚ 18msâ”‚  â”‚ 20msâ”‚  â”‚ 19msâ”‚  â”‚ 18msâ”‚
â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨ requestIdleCallback æˆ–æ—¶é—´åˆ‡ç‰‡åˆ†è§£ä»»åŠ¡
```

#### æ¨¡å¼2: å¸ƒå±€æŠ–åŠ¨ï¼ˆLayout Thrashingï¼‰
```javascript
// ç‰¹å¾: é¢‘ç¹çš„ç´«è‰² Layout å—

âŒ é—®é¢˜ - äº¤æ›¿è¯»å†™å¯¼è‡´å¤šæ¬¡å¸ƒå±€
â”Œâ”€â”€â”â”Œâ”€â”€â”â”Œâ”€â”€â”â”Œâ”€â”€â”â”Œâ”€â”€â”â”Œâ”€â”€â”
â”‚JSâ”‚â”‚LYâ”‚â”‚JSâ”‚â”‚LYâ”‚â”‚JSâ”‚â”‚LYâ”‚  é¢‘ç¹çš„ JS âŸ· Layout åˆ‡æ¢
â””â”€â”€â”˜â””â”€â”€â”˜â””â”€â”€â”˜â””â”€â”€â”˜â””â”€â”€â”˜â””â”€â”€â”˜

// ä»£ç é—®é¢˜
elements.forEach(el => {
  const height = el.offsetHeight;  // è¯»å–ï¼Œè§¦å‘Layout
  el.style.height = height * 2 + 'px';  // å†™å…¥
});

âœ… ä¼˜åŒ–å - æ‰¹é‡è¯»å†™
â”Œâ”€â”€â”€â”€â”    â”Œâ”€â”€â”
â”‚ JS â”‚    â”‚LYâ”‚  åªè§¦å‘ä¸€æ¬¡ Layout
â””â”€â”€â”€â”€â”˜    â””â”€â”€â”˜

// ä¼˜åŒ–ä»£ç 
const heights = elements.map(el => el.offsetHeight);  // æ‰¹é‡è¯»
elements.forEach((el, i) => {
  el.style.height = heights[i] * 2 + 'px';  // æ‰¹é‡å†™
});
```

#### æ¨¡å¼3: å¼ºåˆ¶åŒæ­¥å¸ƒå±€ï¼ˆForced Synchronous Layoutï¼‰
```javascript
// ç‰¹å¾: é»„è‰²JSå—åç´§è·Ÿç´«è‰²Layoutå—ï¼Œæœ‰è­¦å‘Šæ ‡è®°

âŒ é—®é¢˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event: click       â”‚
â”‚   â””â”€ Function       â”‚
â”‚      â””â”€ âš ï¸ Forced   â”‚  è­¦å‘Šï¼šå¼ºåˆ¶åŒæ­¥å¸ƒå±€
â”‚         Reflow      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// ä»£ç é—®é¢˜
function handleClick() {
  element.style.width = '100px';  // å†™å…¥
  const height = element.offsetHeight;  // è¯»å–ï¼Œå¼ºåˆ¶è§¦å‘layout
}

âœ… ä¼˜åŒ–
function handleClick() {
  const height = element.offsetHeight;  // å…ˆè¯»å–
  element.style.width = '100px';  // åå†™å…¥
}
```

#### æ¨¡å¼4: è¿‡åº¦ç»˜åˆ¶ï¼ˆExcessive Paintingï¼‰
```javascript
// ç‰¹å¾: å¤§é‡ç»¿è‰² Paint å—

âŒ é—®é¢˜
â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”
â”‚Pntâ”‚â”‚Pntâ”‚â”‚Pntâ”‚â”‚Pntâ”‚â”‚Pntâ”‚  é¢‘ç¹é‡ç»˜
â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜

// åŸå› ï¼šä½¿ç”¨äº†è§¦å‘é‡ç»˜çš„å±æ€§
element.style.backgroundColor = 'red';
element.style.color = 'blue';

âœ… ä¼˜åŒ– - ä½¿ç”¨ transform å’Œ opacity
element.style.transform = 'translateX(100px)';  // åªè§¦å‘Composite
element.style.opacity = 0.5;
```

#### æ¨¡å¼5: é€’å½’æˆ–æ·±å±‚è°ƒç”¨æ ˆ
```javascript
// ç‰¹å¾: ç«ç„°å›¾éå¸¸é«˜ï¼ˆæ·±ï¼‰

âŒ é—®é¢˜ - è°ƒç”¨æ ˆè¿‡æ·±
              â”Œâ”€â”
              â”‚9â”‚
            â”Œâ”€â”´â”€â”´â”€â”
            â”‚  8  â”‚
          â”Œâ”€â”´â”€â”€â”€â”€â”€â”´â”€â”
          â”‚    7    â”‚
        â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”     è°ƒç”¨æ·±åº¦è¿‡å¤§
        â”‚      6      â”‚     å¯èƒ½å¯¼è‡´æ ˆæº¢å‡º
      â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”   æˆ–æ€§èƒ½é—®é¢˜
      â”‚        5        â”‚
    â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”
    â”‚          4          â”‚
  â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”
  â”‚            3            â”‚
â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”
â”‚              2              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// é€’å½’å‡½æ•°é—®é¢˜
function recursive(n) {
  if (n === 0) return;
  recursive(n - 1);  // æ·±åº¦ = n
}

âœ… ä¼˜åŒ– - ä½¿ç”¨è¿­ä»£
function iterative(n) {
  for (let i = n; i > 0; i--) {
    // å¤„ç†é€»è¾‘
  }
}
```

### ä½¿ç”¨ç«ç„°å›¾çš„æ­¥éª¤

#### æ­¥éª¤1: æ‰¾åˆ°æ€§èƒ½é—®é¢˜æ—¶æ®µ
```javascript
1. æŸ¥çœ‹ Overview çš„ FPS å›¾
2. æ‰¾åˆ°çº¢è‰²æˆ–é»„è‰²çš„åŒºåŸŸï¼ˆå¸§ç‡ä¸‹é™ï¼‰
3. åœ¨æ—¶é—´è½´ä¸Šæ¡†é€‰è¯¥åŒºåŸŸ
```

#### æ­¥éª¤2: æŸ¥çœ‹ä¸»çº¿ç¨‹æ´»åŠ¨
```javascript
4. æ£€æŸ¥ Main çº¿ç¨‹çš„ç«ç„°å›¾
5. å¯»æ‰¾ï¼š
   - å®½çš„å—ï¼ˆè€—æ—¶é•¿çš„ä»»åŠ¡ï¼‰
   - çº¢è‰²è¾¹æ¡†ï¼ˆé•¿ä»»åŠ¡ >50msï¼‰
   - é‡å¤çš„æ¨¡å¼ï¼ˆå¯èƒ½çš„å¾ªç¯é—®é¢˜ï¼‰
```

#### æ­¥éª¤3: æ·±å…¥å‡½æ•°è°ƒç”¨
```javascript
6. ç‚¹å‡»ç«ç„°å›¾ä¸­çš„å‡½æ•°å—
7. æŸ¥çœ‹ Bottom-Up æ‰¾æœ€è€—æ—¶çš„å‡½æ•°
8. æŸ¥çœ‹ Call Tree äº†è§£è°ƒç”¨é“¾
9. ç‚¹å‡»å‡½æ•°åè·³è½¬åˆ°æºä»£ç 
```

#### æ­¥éª¤4: éªŒè¯å‡è®¾
```javascript
10. åœ¨ä»£ç ä¸­æ·»åŠ  performance.mark()
11. é‡æ–°å½•åˆ¶
12. éªŒè¯æ€§èƒ½ç“¶é¢ˆä½ç½®
```

---

## å®é™…ä¼˜åŒ–æ¡ˆä¾‹

### æ¡ˆä¾‹1: æ–‡æœ¬å·®å¼‚ç®—æ³•ä¼˜åŒ–ï¼ˆDeepdesk çœŸå®æ¡ˆä¾‹ï¼‰

#### é—®é¢˜æè¿°
```javascript
// åœºæ™¯ï¼šå®æ—¶æ–‡æœ¬å»ºè®®åŠŸèƒ½
// ç”¨æˆ·è¾“å…¥æ—¶ï¼Œéœ€è¦è®¡ç®—æ–‡æœ¬å·®å¼‚å¹¶æ˜¾ç¤º3ä¸ªå»ºè®®

åŸå§‹æ€§èƒ½é—®é¢˜:
- è¾“å…¥æ›´å¤šæ–‡å­—æ—¶ï¼Œæµè§ˆå™¨å†»ç»“1-2ç§’
- ä½¿ç”¨CPUèŠ‚æµåæ›´åŠ æ˜æ˜¾
```

#### ç«ç„°å›¾åˆ†æ

**ä¼˜åŒ–å‰çš„ç«ç„°å›¾**:
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event: input (1850ms)                          â”‚
â”‚    â””â”€ handleTextInput (1820ms)                  â”‚
â”‚       â””â”€ generateSuggestions (1800ms)           â”‚
â”‚          â”œâ”€ diffChars - Suggestion 1 (620ms)    â”‚  â† ç“¶é¢ˆï¼
â”‚          â”‚  â””â”€ [æ·±åº¦é€’å½’è°ƒç”¨æ ˆ 15å±‚]             â”‚
â”‚          â”œâ”€ diffChars - Suggestion 2 (580ms)    â”‚  â† ç“¶é¢ˆï¼
â”‚          â”‚  â””â”€ [æ·±åº¦é€’å½’è°ƒç”¨æ ˆ 15å±‚]             â”‚
â”‚          â””â”€ diffChars - Suggestion 3 (600ms)    â”‚  â† ç“¶é¢ˆï¼
â”‚             â””â”€ [æ·±åº¦é€’å½’è°ƒç”¨æ ˆ 15å±‚]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜è¯†åˆ«:
1. diffChars å‡½æ•°è¢«è°ƒç”¨3æ¬¡ï¼Œæ¯æ¬¡ 600ms
2. æ–‡æœ¬è¶Šé•¿ï¼Œè®¡ç®—æ—¶é—´è¶Šé•¿ï¼ˆO(nÂ²) å¤æ‚åº¦ï¼‰
3. æ·±å±‚é€’å½’è°ƒç”¨æ ˆè¯´æ˜ç®—æ³•å¤æ‚
```

#### è§£å†³æ–¹æ¡ˆ
```javascript
// âŒ åŸå§‹ä»£ç  - ä½¿ç”¨å¤æ‚çš„ diff ç®—æ³•
import { diffChars } from 'diff';

function generateSuggestions(userText) {
  const suggestions = getSuggestions();

  return suggestions.map(suggestion => {
    const diff = diffChars(userText, suggestion);  // å¤æ‚è®¡ç®—
    return {
      text: suggestion,
      diff: diff
    };
  });
}

// âœ… ä¼˜åŒ–å - è‡ªå®šä¹‰ç®€å•ç®—æ³•
function findFirstDifference(str1, str2) {
  const minLen = Math.min(str1.length, str2.length);

  for (let i = 0; i < minLen; i++) {
    if (str1[i] !== str2[i]) {
      return i;  // åªæ‰¾ç¬¬ä¸€ä¸ªä¸åŒçš„å­—ç¬¦
    }
  }

  return minLen;
}

function generateSuggestions(userText) {
  const suggestions = getSuggestions();

  return suggestions.map(suggestion => {
    const diffIndex = findFirstDifference(userText, suggestion);
    return {
      text: suggestion,
      diffIndex: diffIndex  // ç®€å•çš„å·®å¼‚ä½ç½®
    };
  });
}
```

**ä¼˜åŒ–åçš„ç«ç„°å›¾**:
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event: input (85ms)               â”‚  â† ä» 1850ms é™åˆ° 85msï¼
â”‚    â””â”€ handleTextInput (80ms)       â”‚
â”‚       â””â”€ generateSuggestions (65ms)â”‚
â”‚          â”œâ”€ findFirstDiff (20ms)   â”‚  â† ç®€å•ç®—æ³•
â”‚          â”œâ”€ findFirstDiff (22ms)   â”‚
â”‚          â””â”€ findFirstDiff (23ms)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ€§èƒ½æå‡:
- 95% çš„æ—¶é—´å‡å°‘ï¼ˆ1850ms â†’ 85msï¼‰
- æ¶ˆé™¤äº†æ·±å±‚é€’å½’è°ƒç”¨
- ç”¨æˆ·ä½“éªŒä»"å†»ç»“"å˜ä¸º"æµç•…"
```

### æ¡ˆä¾‹2: isOnScreen æ£€æŸ¥ä¼˜åŒ–

#### é—®é¢˜æè¿°
```javascript
// åœºæ™¯ï¼šé¡µé¢ä¸Šæœ‰å¾ˆå¤šå…ƒç´ éœ€è¦æ£€æŸ¥æ˜¯å¦åœ¨å±å¹•ä¸Š
// æ¯æ¬¡æ»šåŠ¨éƒ½ä¼šæ£€æŸ¥æ‰€æœ‰å…ƒç´ 

åŸå§‹æ€§èƒ½:
- FPS: 12
- æ¯ä¸ª scroll äº‹ä»¶: 78ms
```

#### ç«ç„°å›¾åˆ†æ

**ä¼˜åŒ–å‰**:
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event: scroll (78ms)                           â”‚
â”‚    â””â”€ checkVisibleElements (75ms)               â”‚
â”‚       â”œâ”€ isOnScreen - Element 1 (8ms)           â”‚
â”‚       â”‚  â””â”€ getBoundingClientRect (6ms)         â”‚  â† å¼ºåˆ¶Layout
â”‚       â”œâ”€ isOnScreen - Element 2 (7ms)           â”‚
â”‚       â”‚  â””â”€ getBoundingClientRect (5ms)         â”‚  â† å¼ºåˆ¶Layout
â”‚       â”œâ”€ isOnScreen - Element 3 (8ms)           â”‚
â”‚       â”‚  â””â”€ getBoundingClientRect (6ms)         â”‚  â† å¼ºåˆ¶Layout
â”‚       â”œâ”€ ... (é‡å¤100æ¬¡)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜:
1. æ¯æ¬¡æ»šåŠ¨æ£€æŸ¥100ä¸ªå…ƒç´ 
2. getBoundingClientRect() è§¦å‘å¼ºåˆ¶åŒæ­¥å¸ƒå±€
3. æ²¡æœ‰ä½¿ç”¨é˜²æŠ–/èŠ‚æµ
```

#### è§£å†³æ–¹æ¡ˆ
```javascript
// âŒ åŸå§‹ä»£ç 
function isOnScreen(element) {
  const rect = element.getBoundingClientRect();  // å¼ºåˆ¶Layout
  return (
    rect.top >= 0 &&
    rect.bottom <= window.innerHeight
  );
}

window.addEventListener('scroll', () => {
  elements.forEach(el => {
    if (isOnScreen(el)) {
      el.classList.add('visible');
    }
  });
});

// âœ… ä¼˜åŒ–æ–¹æ¡ˆ1: ä½¿ç”¨ Intersection Observer
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, {
  threshold: 0.1
});

elements.forEach(el => observer.observe(el));

// âœ… ä¼˜åŒ–æ–¹æ¡ˆ2: å¦‚æœå¿…é¡»ç”¨scrolläº‹ä»¶ï¼Œä½¿ç”¨èŠ‚æµ
const checkVisible = throttle(() => {
  // æ‰¹é‡è¯»å–æ‰€æœ‰ rectï¼ˆä¸€æ¬¡Layoutï¼‰
  const rects = elements.map(el => el.getBoundingClientRect());

  // æ‰¹é‡æ›´æ–°
  elements.forEach((el, i) => {
    const rect = rects[i];
    if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
      el.classList.add('visible');
    }
  });
}, 100);

window.addEventListener('scroll', checkVisible, { passive: true });
```

**ä¼˜åŒ–åçš„ç«ç„°å›¾**:
```javascript
// ä½¿ç”¨ Intersection Observer å
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IntersectionObserver  â”‚  å¼‚æ­¥ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹
â”‚  Callback (2ms)        â”‚  åªå¤„ç†å¯è§æ€§å˜åŒ–çš„å…ƒç´ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ€§èƒ½æå‡:
- FPS: 12 â†’ 60 (5å€æå‡)
- scroll äº‹ä»¶å¤„ç†: 78ms â†’ 0ms (ä¸å†ä½¿ç”¨scrolläº‹ä»¶)
- æµç•…åº¦: æ˜æ˜¾æ”¹å–„
```

### æ¡ˆä¾‹3: React åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–

#### é—®é¢˜æè¿°
```javascript
// åœºæ™¯ï¼šæ¸²æŸ“1000ä¸ªå•†å“åˆ—è¡¨
// æ»šåŠ¨æ—¶å‡ºç°æ˜æ˜¾å¡é¡¿

åŸå§‹æ€§èƒ½:
- åˆå§‹æ¸²æŸ“: 2.5ç§’
- æ»šåŠ¨ FPS: 25
```

#### ç«ç„°å›¾åˆ†æ

**ä¼˜åŒ–å‰ - Chrome DevTools Performance**:
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŸ³ Page Load                                        â”‚
â”‚    â””â”€ React Render (2480ms)                         â”‚
â”‚       â””â”€ ProductList (2450ms)                       â”‚
â”‚          â”œâ”€ ProductCard #1 (2.5ms)                  â”‚
â”‚          â”œâ”€ ProductCard #2 (2.4ms)                  â”‚
â”‚          â”œâ”€ ... (é‡å¤1000æ¬¡)                         â”‚
â”‚          â”œâ”€ ProductCard #999 (2.6ms)                â”‚
â”‚          â””â”€ ProductCard #1000 (2.5ms)               â”‚
â”‚                                                      â”‚
â”‚  ğŸ“Š Summary:                                         â”‚
â”‚  Rendering: 1850ms                                  â”‚
â”‚  Painting: 630ms                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**React DevTools Profiler - Flame Graph**:
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Profiler: Commit #1 (2.45s)                        â”‚
â”‚                                                      â”‚
â”‚  Flamegraph View:                                   â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ <ProductList> 2450ms / 2450ms               â”‚  â”‚  å®½åº¦æœ€å¤§=è€—æ—¶æœ€é•¿
â”‚  â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚    â”œâ”€ <ProductCard> 2.5ms / 2.5ms                 â”‚
â”‚    â”œâ”€ <ProductCard> 2.4ms / 2.4ms                 â”‚
â”‚    â”œâ”€ <ProductCard> 2.6ms / 2.6ms                 â”‚
â”‚    â””â”€ ... (1000 ä¸ªå­ç»„ä»¶)                          â”‚
â”‚                                                      â”‚
â”‚  Ranked View:                                       â”‚
â”‚  1. ProductList: 2450ms (è‡ªèº«: 0ms)                â”‚
â”‚  2. ProductCard: 2.5ms (æ¯ä¸ª) Ã— 1000               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜:
1. ä¸€æ¬¡æ¸²æŸ“1000ä¸ªç»„ä»¶
2. æ‰€æœ‰ç»„ä»¶éƒ½åœ¨å¯è§åŒºåŸŸå¤–ä¹Ÿè¢«æ¸²æŸ“
3. å¤§é‡DOMèŠ‚ç‚¹å¯¼è‡´å¸ƒå±€å’Œç»˜åˆ¶æ—¶é—´é•¿
```

#### è§£å†³æ–¹æ¡ˆ
```javascript
// âŒ åŸå§‹ä»£ç 
function ProductList({ products }) {
  return (
    <div className="product-list">
      {products.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  );
}

// âœ… ä¼˜åŒ–æ–¹æ¡ˆ: è™šæ‹Ÿæ»šåŠ¨
import { FixedSizeList } from 'react-window';

function ProductList({ products }) {
  return (
    <FixedSizeList
      height={800}              // å®¹å™¨é«˜åº¦
      itemCount={products.length}  // æ€»é¡¹ç›®æ•°
      itemSize={200}            // æ¯é¡¹é«˜åº¦
      width="100%"
    >
      {({ index, style }) => (
        <div style={style}>
          <ProductCard product={products[index]} />
        </div>
      )}
    </FixedSizeList>
  );
}
```

**ä¼˜åŒ–åçš„ç«ç„°å›¾**:
```javascript
// Chrome DevTools Performance
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŸ³ Page Load                                        â”‚
â”‚    â””â”€ React Render (95ms)                           â”‚  â† ä»2480msé™åˆ°95ms
â”‚       â””â”€ ProductList (90ms)                         â”‚
â”‚          â”œâ”€ ProductCard #1 (2.5ms)                  â”‚
â”‚          â”œâ”€ ProductCard #2 (2.4ms)                  â”‚
â”‚          â”œâ”€ ProductCard #3 (2.6ms)                  â”‚
â”‚          â”œâ”€ ProductCard #4 (2.5ms)                  â”‚  åªæ¸²æŸ“å¯è§çš„4ä¸ª
â”‚          â””â”€ ProductCard #5 (2.3ms)                  â”‚
â”‚                                                      â”‚
â”‚  ğŸ“Š Summary:                                         â”‚
â”‚  Rendering: 75ms   (â†“ 96%)                          â”‚
â”‚  Painting: 20ms    (â†“ 97%)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// React DevTools Profiler
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Profiler: Commit #1 (90ms)                         â”‚  â† å¿«äº†27å€
â”‚                                                      â”‚
â”‚  Flamegraph View:                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ <ProductList>    â”‚  90ms / 90ms                  â”‚  å®½åº¦æ˜æ˜¾å˜çª„
â”‚  â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚    â”œâ”€ <ProductCard> 2.5ms / 2.5ms                   â”‚
â”‚    â”œâ”€ <ProductCard> 2.4ms / 2.4ms                   â”‚
â”‚    â”œâ”€ <ProductCard> 2.6ms / 2.6ms                   â”‚
â”‚    â”œâ”€ <ProductCard> 2.5ms / 2.5ms                   â”‚
â”‚    â””â”€ <ProductCard> 2.3ms / 2.3ms                   â”‚
â”‚                                                      â”‚
â”‚  Ranked View:                                       â”‚
â”‚  1. ProductList: 90ms (è‡ªèº«: 78ms)                  â”‚
â”‚  2. ProductCard: 2.5ms (æ¯ä¸ª) Ã— 5                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ€§èƒ½æå‡:
- åˆå§‹æ¸²æŸ“: 2500ms â†’ 95ms (96% å‡å°‘)
- æ¸²æŸ“çš„ç»„ä»¶æ•°: 1000 â†’ 5 (åªæ¸²æŸ“å¯è§çš„)
- æ»šåŠ¨ FPS: 25 â†’ 60
- å†…å­˜ä½¿ç”¨: å¤§å¹…é™ä½
```

### æ¡ˆä¾‹4: äº‹ä»¶å¤„ç†å™¨ä¼˜åŒ–

#### é—®é¢˜æè¿°
```javascript
// åœºæ™¯ï¼šæœç´¢æ¡†è¾“å…¥æ—¶å®æ—¶æœç´¢
// æ¯æ¬¡æŒ‰é”®éƒ½è§¦å‘APIè¯·æ±‚

åŸå§‹é—®é¢˜:
- è¾“å…¥"React"ä¼šå‘é€5ä¸ªAPIè¯·æ±‚
- è¾“å…¥æœ‰å»¶è¿Ÿæ„Ÿ
- æœåŠ¡å™¨å‹åŠ›å¤§
```

#### ç«ç„°å›¾åˆ†æ

**ä¼˜åŒ–å‰**:
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event: keypress 'R' (350ms)                        â”‚
â”‚    â””â”€ handleSearch (340ms)                          â”‚
â”‚       â””â”€ fetch('/api/search?q=R') (335ms)           â”‚  â† ç­‰å¾…ç½‘ç»œ
â”‚                                                      â”‚
â”‚  Event: keypress 'e' (340ms)                        â”‚
â”‚    â””â”€ handleSearch (335ms)                          â”‚
â”‚       â””â”€ fetch('/api/search?q=Re') (330ms)          â”‚
â”‚                                                      â”‚
â”‚  Event: keypress 'a' (345ms)                        â”‚
â”‚    â””â”€ handleSearch (340ms)                          â”‚
â”‚       â””â”€ fetch('/api/search?q=Rea') (335ms)         â”‚
â”‚                                                      â”‚
â”‚  ... ç»§ç»­ 'c', 't'                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜:
1. æ¯æ¬¡æŒ‰é”®éƒ½å‘é€è¯·æ±‚ï¼ˆæµªè´¹ï¼‰
2. å‰é¢çš„è¯·æ±‚è¿˜æ²¡å®Œæˆï¼Œåé¢çš„åˆå‘å‡ºå»äº†
3. ç½‘ç»œè¯·æ±‚é˜»å¡ä¸»çº¿ç¨‹ï¼ˆåº”è¯¥å¼‚æ­¥ï¼‰
```

#### è§£å†³æ–¹æ¡ˆ
```javascript
// âŒ åŸå§‹ä»£ç 
function SearchBox() {
  const [query, setQuery] = useState('');
  const [results, setResults] = useState([]);

  const handleSearch = async (value) => {
    const response = await fetch(`/api/search?q=${value}`);
    const data = await response.json();
    setResults(data);
  };

  return (
    <input
      value={query}
      onChange={(e) => {
        setQuery(e.target.value);
        handleSearch(e.target.value);  // æ¯æ¬¡è¾“å…¥éƒ½æœç´¢
      }}
    />
  );
}

// âœ… ä¼˜åŒ–æ–¹æ¡ˆ: é˜²æŠ– + å–æ¶ˆè¿‡æœŸè¯·æ±‚
import { useState, useCallback, useRef } from 'react';
import { debounce } from 'lodash';

function SearchBox() {
  const [query, setQuery] = useState('');
  const [results, setResults] = useState([]);
  const abortControllerRef = useRef(null);

  const performSearch = async (value) => {
    // å–æ¶ˆä¹‹å‰çš„è¯·æ±‚
    if (abortControllerRef.current) {
      abortControllerRef.current.abort();
    }

    // åˆ›å»ºæ–°çš„ AbortController
    const controller = new AbortController();
    abortControllerRef.current = controller;

    try {
      const response = await fetch(`/api/search?q=${value}`, {
        signal: controller.signal
      });
      const data = await response.json();
      setResults(data);
    } catch (error) {
      if (error.name !== 'AbortError') {
        console.error('Search error:', error);
      }
    }
  };

  // é˜²æŠ–ï¼š300msåæ‰æ‰§è¡Œæœç´¢
  const debouncedSearch = useCallback(
    debounce((value) => {
      if (value.trim()) {
        performSearch(value);
      }
    }, 300),
    []
  );

  return (
    <input
      value={query}
      onChange={(e) => {
        setQuery(e.target.value);
        debouncedSearch(e.target.value);
      }}
    />
  );
}
```

**ä¼˜åŒ–åçš„ç«ç„°å›¾**:
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event: keypress 'R' (1ms)                          â”‚  å¿«é€Ÿå“åº”
â”‚    â””â”€ setQuery (0.5ms)                              â”‚
â”‚                                                      â”‚
â”‚  Event: keypress 'e' (1ms)                          â”‚
â”‚    â””â”€ setQuery (0.5ms)                              â”‚
â”‚                                                      â”‚
â”‚  Event: keypress 'a' (1ms)                          â”‚
â”‚    â””â”€ setQuery (0.5ms)                              â”‚
â”‚                                                      â”‚
â”‚  Event: keypress 'c' (1ms)                          â”‚
â”‚    â””â”€ setQuery (0.5ms)                              â”‚
â”‚                                                      â”‚
â”‚  Event: keypress 't' (1ms)                          â”‚
â”‚    â””â”€ setQuery (0.5ms)                              â”‚
â”‚                                                      â”‚
â”‚  [300ms å»¶è¿Ÿ]                                        â”‚  é˜²æŠ–ç­‰å¾…
â”‚                                                      â”‚
â”‚  Timer: debounced search                            â”‚
â”‚    â””â”€ fetch('/api/search?q=React') (280ms)          â”‚  åªå‘é€1ä¸ªè¯·æ±‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ€§èƒ½æå‡:
- API è¯·æ±‚æ•°: 5 â†’ 1 (å‡å°‘80%)
- æŒ‰é”®å“åº”æ—¶é—´: 350ms â†’ 1ms
- æœåŠ¡å™¨è´Ÿè½½: å¤§å¹…é™ä½
- ç”¨æˆ·ä½“éªŒ: è¾“å…¥æµç•…ï¼Œç»“æœå‡†ç¡®
```

---

## 2024å¹´æ–°åŠŸèƒ½

### 1. CPU èŠ‚æµæ ¡å‡† (Chrome 134+)

```javascript
// è‡ªåŠ¨ç”Ÿæˆé€‚åˆä½ æœºå™¨çš„èŠ‚æµé…ç½®

ä½¿ç”¨æ­¥éª¤:
1. æ‰“å¼€ Performance é¢æ¿
2. ç‚¹å‡»è®¾ç½®å›¾æ ‡ âš™ï¸
3. CPU -> Calibrate
4. ç­‰å¾…åŸºå‡†æµ‹è¯•å®Œæˆï¼ˆ10-20ç§’ï¼‰

ç»“æœ:
âœ“ Low-tier mobile (ä½ç«¯æ‰‹æœºæ¨¡æ‹Ÿ)
âœ“ Mid-tier mobile (ä¸­ç«¯æ‰‹æœºæ¨¡æ‹Ÿ)

// åŸºäºçœŸå®è®¾å¤‡æ•°æ®ç”Ÿæˆçš„é…ç½®
// æ¯”å›ºå®šçš„ 4x/6x æ›´å‡†ç¡®
```

### 2. 20x CPU å‡é€Ÿ (Chrome 126+)

```javascript
// ä¹‹å‰æœ€å¤§åªæœ‰ 6xï¼Œç°åœ¨å¯ä»¥ 20x

ä½¿ç”¨åœºæ™¯:
- æ¨¡æ‹Ÿæä½ç«¯è®¾å¤‡
- æ”¾å¤§å¾®å°çš„æ€§èƒ½é—®é¢˜
- è®©é‡‡æ ·profileræ•è·æ›´å¤šç»†èŠ‚

// åœ¨ Performance é¢æ¿è®¾ç½®ä¸­é€‰æ‹© "20x slowdown"
```

### 3. è‡ªå®šä¹‰ç«ç„°å›¾è¿‡æ»¤ (Chrome 124+)

```javascript
// éšè—ä¸å…³å¿ƒçš„å‡½æ•°ï¼Œèšç„¦å…³é”®ä¿¡æ¯

å³é”®ç‚¹å‡»ç«ç„°å›¾ä¸­çš„å‡½æ•°:
- Hide function: éšè—è¿™ä¸ªå‡½æ•°
- Hide children: éšè—æ‰€æœ‰å­å‡½æ•°
- Hide repeating children: éšè—é‡å¤å‡ºç°çš„å­å‡½æ•°

ç¤ºä¾‹ï¼šéšè— React å†…éƒ¨è°ƒç”¨ï¼Œåªçœ‹ä¸šåŠ¡ä»£ç 
```

### 4. åŸºäºçœŸå®ç”¨æˆ·æ•°æ®çš„å»ºè®®

```javascript
// Chrome ä¼šåŸºäº CrUX æ•°æ®æ¨èèŠ‚æµé…ç½®

å¦‚æœä½ çš„ç½‘ç«™åœ¨ CrUX æ•°æ®åº“ä¸­:
- DevTools ä¼šæ˜¾ç¤ºçœŸå®ç”¨æˆ·çš„è®¾å¤‡åˆ†å¸ƒ
- æ¨èæœ€åˆé€‚çš„èŠ‚æµé…ç½®
- å¸®åŠ©ä½ ä¼˜åŒ–å®é™…ç”¨æˆ·ä½“éªŒ

// åœ¨ Performance é¢æ¿çš„ CPU ä¸‹æ‹‰èœå•ä¸­æŸ¥çœ‹
```

### 5. æ€§èƒ½æ´å¯Ÿé¢æ¿é›†æˆ

```javascript
// Performance Insights åŠŸèƒ½åˆå¹¶åˆ° Performance é¢æ¿

æ–°çš„ Insights æ ‡ç­¾:
âœ“ è‡ªåŠ¨è¯†åˆ«æ€§èƒ½é—®é¢˜
âœ“ æä¾›ä¼˜åŒ–å»ºè®®
âœ“ æ˜¾ç¤º Core Web Vitals
âœ“ çªå‡ºæ˜¾ç¤ºé•¿ä»»åŠ¡å’Œå¸ƒå±€åç§»

// æ¯”ä»¥å‰æ›´å®¹æ˜“å‘ç°é—®é¢˜
```

---

## å¸¸è§æ€§èƒ½æ¨¡å¼è¯†åˆ«

### æ¨¡å¼è¯†åˆ«é€ŸæŸ¥è¡¨

```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è§†è§‰æ¨¡å¼              â”‚ é—®é¢˜                â”‚ è§£å†³æ–¹æ¡ˆ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¥ çº¢è‰²è¾¹æ¡†å®½å—       â”‚ é•¿ä»»åŠ¡ (>50ms)      â”‚ ä»£ç åˆ†å‰²    â”‚
â”‚ ğŸŸ¨ é«˜åº¦å¾ˆé«˜çš„é»„è‰²å—   â”‚ æ·±å±‚é€’å½’/è°ƒç”¨æ ˆ     â”‚ æ”¹ç”¨è¿­ä»£    â”‚
â”‚ ğŸŸªğŸŸ¨ ç´«é»„äº¤æ›¿æ¨¡å¼     â”‚ å¸ƒå±€æŠ–åŠ¨            â”‚ æ‰¹é‡è¯»å†™    â”‚
â”‚ ğŸŸ© å¤§é‡ç»¿è‰²å—         â”‚ è¿‡åº¦ç»˜åˆ¶            â”‚ ç”¨transform â”‚
â”‚ ğŸŸ¨ é‡å¤çš„é»„è‰²å—       â”‚ å¾ªç¯ä¸­çš„é‡å¤è®¡ç®—    â”‚ ç¼“å­˜/memo   â”‚
â”‚ â¬œ å¤§é‡ç©ºç™½           â”‚ ç­‰å¾…/é˜»å¡           â”‚ å¼‚æ­¥å¤„ç†    â”‚
â”‚ ğŸŸª å®½çš„ç´«è‰²å—         â”‚ å¤æ‚å¸ƒå±€è®¡ç®—        â”‚ ç®€åŒ–DOM     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯¦ç»†è¯†åˆ«æŒ‡å—

#### 1. JavaScript æ‰§è¡Œé—®é¢˜

**æ¨¡å¼**: é»„è‰²å—å ä¸»å¯¼
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚  ä¸»è¦æ˜¯é»„è‰²
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯èƒ½åŸå› :
- å¤æ‚è®¡ç®—
- å¤§æ•°æ®å¤„ç†
- å¯†é›†å¾ªç¯
- ç¬¬ä¸‰æ–¹åº“æ‰§è¡Œ

æ£€æŸ¥æ–¹æ³•:
1. Bottom-Up æŸ¥çœ‹æœ€è€—æ—¶çš„å‡½æ•°
2. çœ‹å‡½æ•°ååˆ¤æ–­æ˜¯ä¸šåŠ¡ä»£ç è¿˜æ˜¯åº“ä»£ç 
3. æ£€æŸ¥æ˜¯å¦æœ‰O(nÂ²)æˆ–æ›´é«˜å¤æ‚åº¦çš„ç®—æ³•

è§£å†³æ–¹å‘:
- ä¼˜åŒ–ç®—æ³•å¤æ‚åº¦
- ä½¿ç”¨ Web Worker
- å®ç°æ—¶é—´åˆ‡ç‰‡
- æ‡’åŠ è½½/æŒ‰éœ€è®¡ç®—
```

#### 2. æ¸²æŸ“/å¸ƒå±€é—®é¢˜

**æ¨¡å¼**: ç´«è‰²å—å ä¸»å¯¼
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“   â”‚  ä¸»è¦æ˜¯ç´«è‰²
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“   â”‚
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯èƒ½åŸå› :
- å¤æ‚çš„CSSé€‰æ‹©å™¨
- å¤§é‡DOMèŠ‚ç‚¹
- Flexbox/Grid å¤æ‚å¸ƒå±€
- é¢‘ç¹çš„æ ·å¼é‡ç®—

æ£€æŸ¥æ–¹æ³•:
1. Rendering é¢æ¿ -> Paint flashing
2. çœ‹æ˜¯å¦æ•´ä¸ªé¡µé¢éƒ½åœ¨é‡ç»˜
3. Coverage é¢æ¿æ£€æŸ¥æœªä½¿ç”¨çš„CSS

è§£å†³æ–¹å‘:
- ç®€åŒ–DOMç»“æ„
- ä½¿ç”¨ CSS contain å±æ€§
- é¿å…å¤æ‚é€‰æ‹©å™¨
- å‡å°‘åµŒå¥—å±‚çº§
```

#### 3. ç»˜åˆ¶é—®é¢˜

**æ¨¡å¼**: ç»¿è‰²å—é¢‘ç¹å‡ºç°
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â– â–  â– â–  â– â–  â– â–  â– â–  â– â–  â– â–  â– â–  â– â–     â”‚  é¢‘ç¹çš„ç»¿è‰²å—
â”‚ â– â–  â– â–  â– â–  â– â–  â– â–  â– â–  â– â–  â– â–  â– â–     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯èƒ½åŸå› :
- åŠ¨ç”»ä½¿ç”¨äº†è§¦å‘é‡ç»˜çš„å±æ€§
- å¤§é¢ç§¯åŒºåŸŸé‡ç»˜
- å¤æ‚çš„èƒŒæ™¯å›¾ç‰‡/æ¸å˜

æ£€æŸ¥æ–¹æ³•:
1. Rendering é¢æ¿ -> Paint flashing (ç»¿è‰²é«˜äº®)
2. Layers é¢æ¿æŸ¥çœ‹åˆæˆå±‚
3. æ£€æŸ¥åŠ¨ç”»ä½¿ç”¨çš„CSSå±æ€§

è§£å†³æ–¹å‘:
- ä½¿ç”¨ transform å’Œ opacity åšåŠ¨ç”»
- ä½¿ç”¨ will-change æå‡ä¸ºåˆæˆå±‚
- å‡å°‘ç»˜åˆ¶åŒºåŸŸ
- ä¼˜åŒ–å¤æ‚å›¾å½¢
```

#### 4. ç©ºé—²/ç­‰å¾…é—®é¢˜

**æ¨¡å¼**: å¤§é‡ç©ºç™½/ç°è‰²åŒºåŸŸ
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–ˆâ–ˆ                       â–ˆâ–ˆ    â”‚  å¤§é‡ç©ºç™½
â”‚    â–ˆâ–ˆâ–ˆâ–ˆ                        â”‚
â”‚                     â–ˆâ–ˆâ–ˆâ–ˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯èƒ½åŸå› :
- ç½‘ç»œè¯·æ±‚ç­‰å¾…
- å®šæ—¶å™¨/å»¶è¿Ÿ
- ç­‰å¾…ç”¨æˆ·è¾“å…¥
- åŒæ­¥ XHR (ä¸æ¨è)

æ£€æŸ¥æ–¹æ³•:
1. Network é¢æ¿æŸ¥çœ‹è¯·æ±‚æ—¶åº
2. çœ‹æ˜¯å¦æœ‰ blocking çš„è¯·æ±‚
3. æ£€æŸ¥æ˜¯å¦æœ‰é•¿æ—¶é—´çš„ TTFB

è§£å†³æ–¹å‘:
- ä¼˜åŒ– API å“åº”æ—¶é—´
- ä½¿ç”¨å¹¶è¡Œè¯·æ±‚
- å®ç°è¯·æ±‚ç¼“å­˜
- é¢„åŠ è½½èµ„æº
```

---

## é«˜çº§è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨ User Timing API æ ‡è®°å…³é”®æ—¶é—´ç‚¹

```javascript
// åœ¨ä»£ç ä¸­æ·»åŠ æ€§èƒ½æ ‡è®°
performance.mark('feature-start');

// æ‰§è¡ŒåŠŸèƒ½ä»£ç 
await loadFeature();

performance.mark('feature-end');
performance.measure('feature-load', 'feature-start', 'feature-end');

// åœ¨ç«ç„°å›¾ä¸­ä¼šæ˜¾ç¤ºä¸ºç´«è‰²è±å½¢æ ‡è®°
// æ–¹ä¾¿å®šä½ç‰¹å®šåŠŸèƒ½çš„æ€§èƒ½
```

**åœ¨ç«ç„°å›¾ä¸­çš„æ˜¾ç¤º**:
```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â—† feature-start                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ loadFeature (450ms)      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                             â—† feature-end       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 450ms â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ¯”è¾ƒä¼˜åŒ–å‰åçš„ Trace

```javascript
// 1. ä¿å­˜ä¼˜åŒ–å‰çš„ trace
// Performance é¢æ¿ -> ç‚¹å‡» â¬‡ ä¸‹è½½æŒ‰é’® -> ä¿å­˜ä¸º before.json

// 2. åº”ç”¨ä¼˜åŒ–

// 3. ä¿å­˜ä¼˜åŒ–åçš„ trace
// ä¿å­˜ä¸º after.json

// 4. å¯¹æ¯”åˆ†æ
// ä½¿ç”¨å¤šä¸ªæµè§ˆå™¨çª—å£å¹¶æ’æ‰“å¼€ä¸¤ä¸ª trace
// æˆ–ä½¿ç”¨å·¥å…·å¯¹æ¯”æŒ‡æ ‡
```

**å¯¹æ¯”ç¤ºä¾‹**:
```javascript
ä¼˜åŒ–å‰ (before.json):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scripting: 1850ms              â”‚
â”‚  Rendering: 630ms               â”‚
â”‚  Painting: 290ms                â”‚
â”‚  FPS: 12                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŒ–å (after.json):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scripting: 280ms   (â†“ 85%)    â”‚
â”‚  Rendering: 95ms    (â†“ 85%)    â”‚
â”‚  Painting: 45ms     (â†“ 84%)    â”‚
â”‚  FPS: 60            (â†‘ 400%)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ä½¿ç”¨ console.time() æµ‹é‡ä»£ç æ®µ

```javascript
console.time('Heavy Operation');

for (let i = 0; i < 1000000; i++) {
  // é‡æ“ä½œ
}

console.timeEnd('Heavy Operation');
// è¾“å‡º: Heavy Operation: 245.123ms

// åœ¨ç«ç„°å›¾çš„ Console åŒºåŸŸå¯ä»¥çœ‹åˆ°
```

### 4. å¯ç”¨ Paint Flashing

```javascript
// å®æ—¶æŸ¥çœ‹å“ªäº›åŒºåŸŸè¢«é‡ç»˜

æ­¥éª¤:
1. DevTools -> More tools -> Rendering
2. å‹¾é€‰ "Paint flashing"
3. ç»¿è‰²é—ªçƒ = é‡ç»˜åŒºåŸŸ

// é…åˆç«ç„°å›¾ä½¿ç”¨
// çœ‹åˆ°ç«ç„°å›¾ä¸­çš„ Paint äº‹ä»¶æ—¶
// åŒæ—¶çœ‹åˆ°é¡µé¢ä¸Šå¯¹åº”åŒºåŸŸé—ªç»¿è‰²
```

### 5. åˆ†æ JavaScript å †å†…å­˜

```javascript
// é…åˆ Memory é¢æ¿ä½¿ç”¨

æ­¥éª¤:
1. Memory é¢æ¿ -> Allocation instrumentation on timeline
2. å¼€å§‹å½•åˆ¶
3. æ‰§è¡Œæ“ä½œ
4. åœæ­¢å½•åˆ¶
5. æŸ¥çœ‹å†…å­˜åˆ†é…ç«ç„°å›¾

// å¯ä»¥çœ‹åˆ°å“ªäº›å‡½æ•°åˆ†é…äº†æœ€å¤šå†…å­˜
```

### 6. ä½¿ç”¨ Layers é¢æ¿ç†è§£åˆæˆ

```javascript
// æŸ¥çœ‹é¡µé¢çš„åˆæˆå±‚

æ­¥éª¤:
1. DevTools -> More tools -> Layers
2. æŸ¥çœ‹ 3D å±‚çº§è§†å›¾
3. ç‚¹å‡»æŸå±‚æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

// é…åˆ Performance é¢æ¿
// ç†è§£ä¸ºä»€ä¹ˆæŸäº›åŠ¨ç”»ä¼šè§¦å‘é‡ç»˜
// å“ªäº›å…ƒç´ è¢«æå‡ä¸ºåˆæˆå±‚
```

### 7. æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ + æ…¢é€Ÿ CPU

```javascript
// åŒæ—¶å¯ç”¨ç½‘ç»œèŠ‚æµå’Œ CPU èŠ‚æµ

æ­¥éª¤:
1. Network é¢æ¿ -> é€‰æ‹© "Slow 3G"
2. Performance é¢æ¿ -> CPU -> é€‰æ‹© "6x slowdown"
3. å½•åˆ¶å¹¶åˆ†æ

// æ¨¡æ‹Ÿæœ€å·®æƒ…å†µ
// ç¡®ä¿åœ¨ä½ç«¯è®¾å¤‡ä¸Šä¹Ÿèƒ½è‰¯å¥½è¿è¡Œ
```

### 8. æŸ¥æ‰¾æœªä½¿ç”¨çš„ä»£ç 

```javascript
// é…åˆ Coverage å·¥å…·

æ­¥éª¤:
1. DevTools -> More tools -> Coverage
2. ç‚¹å‡»å½•åˆ¶æŒ‰é’®
3. ä½¿ç”¨åº”ç”¨
4. åœæ­¢å½•åˆ¶
5. æŸ¥çœ‹çº¢è‰²ï¼ˆæœªä½¿ç”¨ï¼‰vs è“è‰²ï¼ˆå·²ä½¿ç”¨ï¼‰

// æ‰¾å‡ºå¯ä»¥ç§»é™¤æˆ–æ‡’åŠ è½½çš„ä»£ç 
```

### 9. ä½¿ç”¨ Performance Monitor å®æ—¶ç›‘æ§

```javascript
// å®æ—¶æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡

æ­¥éª¤:
1. DevTools -> More tools -> Performance monitor
2. å‹¾é€‰è¦ç›‘æ§çš„æŒ‡æ ‡:
   - CPU usage
   - JS heap size
   - DOM Nodes
   - JS event listeners
   - Layouts / sec
   - Style recalcs / sec

// å®æ—¶å›¾è¡¨æ˜¾ç¤º
// é…åˆ Performance é¢æ¿å®šä½é—®é¢˜æ—¶åˆ»
```

### 10. è‡ªå®šä¹‰ Performance æ ‡è®°

```javascript
// åœ¨ React/Next.js ä¸­æ·»åŠ è‡ªå®šä¹‰æ ‡è®°

// React å¼€å‘æ¨¡å¼ä¼šè‡ªåŠ¨æ·»åŠ æ ‡è®°
// ç”Ÿäº§æ¨¡å¼éœ€è¦æ‰‹åŠ¨æ·»åŠ 

import { unstable_trace as trace } from 'react';

function MyComponent() {
  return trace('MyComponent render', () => {
    // ç»„ä»¶é€»è¾‘
    return <div>Hello</div>;
  });
}

// æˆ–ä½¿ç”¨ Profiler API
import { Profiler } from 'react';

function onRenderCallback(
  id, // ç»„ä»¶ID
  phase, // "mount" æˆ– "update"
  actualDuration, // æ¸²æŸ“è€—æ—¶
  baseDuration, // ä¼°è®¡è€—æ—¶
  startTime,
  commitTime
) {
  console.log(`${id} ${phase} took ${actualDuration}ms`);
}

<Profiler id="MyComponent" onRender={onRenderCallback}>
  <MyComponent />
</Profiler>
```

---

## æ€»ç»“ä¸æœ€ä½³å®è·µ

### ç«ç„°å›¾åˆ†ææµç¨‹

```javascript
1. å½•åˆ¶æ€§èƒ½åˆ†æ
   â†“
2. æŸ¥çœ‹ Overview æ‰¾åˆ°é—®é¢˜æ—¶æ®µï¼ˆFPSä¸‹é™ï¼‰
   â†“
3. æŸ¥çœ‹ä¸»çº¿ç¨‹ç«ç„°å›¾è¯†åˆ«è§†è§‰æ¨¡å¼
   â†“
4. ä½¿ç”¨ Bottom-Up æ‰¾æœ€è€—æ—¶å‡½æ•°
   â†“
5. ä½¿ç”¨ Call Tree ç†è§£è°ƒç”¨ä¸Šä¸‹æ–‡
   â†“
6. ç‚¹å‡»è·³è½¬åˆ°æºä»£ç 
   â†“
7. åº”ç”¨ä¼˜åŒ–
   â†“
8. é‡æ–°å½•åˆ¶éªŒè¯
   â†“
9. å¯¹æ¯”ä¼˜åŒ–å‰åæŒ‡æ ‡
```

### æ€§èƒ½ä¼˜åŒ–ä¼˜å…ˆçº§

```javascript
1. æ¶ˆé™¤é•¿ä»»åŠ¡ (>50ms)
   - å½±å“ FID/INP
   - å¯¼è‡´é¡µé¢å¡é¡¿
   - æœ€é«˜ä¼˜å…ˆçº§

2. å‡å°‘å¸ƒå±€æŠ–åŠ¨
   - æ‰¹é‡è¯»å†™ DOM
   - é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€
   - é«˜ä¼˜å…ˆçº§

3. ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½
   - ä½¿ç”¨ transform/opacity
   - è™šæ‹Ÿæ»šåŠ¨é•¿åˆ—è¡¨
   - ä¸­ä¼˜å…ˆçº§

4. å‡å°‘ç»˜åˆ¶åŒºåŸŸ
   - åˆç†ä½¿ç”¨åˆæˆå±‚
   - ä¼˜åŒ–å¤æ‚å›¾å½¢
   - ä¸­ä¼˜å…ˆçº§

5. ä¼˜åŒ–èµ„æºåŠ è½½
   - ä»£ç åˆ†å‰²
   - æ‡’åŠ è½½
   - ä½ä¼˜å…ˆçº§ï¼ˆä½†å¾ˆé‡è¦ï¼‰
```

### æ³¨æ„äº‹é¡¹

```javascript
âš ï¸ åœ¨ç”Ÿäº§ç¯å¢ƒæµ‹é‡æ€§èƒ½
// React å¼€å‘æ¨¡å¼æ¯”ç”Ÿäº§æ…¢ 2-8 å€
// å§‹ç»ˆåœ¨ç”Ÿäº§æ„å»ºä¸­æµ‹é‡æœ€ç»ˆæ€§èƒ½

âš ï¸ ä½¿ç”¨ CPU èŠ‚æµ
// å¼€å‘æœºå™¨é€šå¸¸å¾ˆå¿«
// èŠ‚æµå¯ä»¥æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è®¾å¤‡

âš ï¸ å¤šæ¬¡æµ‹é‡å–å¹³å‡å€¼
// å•æ¬¡æµ‹é‡å¯èƒ½æœ‰è¯¯å·®
// è‡³å°‘æµ‹é‡ 3 æ¬¡

âš ï¸ å…³æ³¨çœŸå®ç”¨æˆ·æŒ‡æ ‡
// Lighthouse åˆ†æ•°åªæ˜¯å‚è€ƒ
// CrUX æ•°æ®åæ˜ çœŸå®ç”¨æˆ·ä½“éªŒ

âš ï¸ é¿å…è¿‡åº¦ä¼˜åŒ–
// å…ˆè§£å†³æœ€å¤§çš„æ€§èƒ½é—®é¢˜
// å¾®ä¼˜åŒ–æ”¾åˆ°æœ€å
```

ç«ç„°å›¾æ˜¯æ€§èƒ½ä¼˜åŒ–æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ã€‚ç†Ÿç»ƒæŒæ¡ç«ç„°å›¾é˜…è¯»ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆï¼Œå¤§å¹…æå‡åº”ç”¨æ€§èƒ½ï¼
